<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Students - Green Valley High School</title>
<style>
body { 
  font-family: Arial, sans-serif; 
  background:#f0f2f5; 
  margin:0; 
  padding:0;
}
header { 
  text-align:center; 
  padding:15px; 
  background:#4CAF50; 
  color:white;
}
nav ul { 
  display:flex; 
  justify-content:center; 
  list-style:none; 
  padding:0; 
  margin:0; 
  gap:20px;
}
nav ul li a { 
  color:white; 
  text-decoration:none; 
  font-weight:bold;
}
nav ul li a.active { 
  text-decoration:underline;
}
/* Search Bar */
#search-bar { 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  gap: 22px; 
  margin: 30px 0; 
}

#search-bar select, 
#search-bar input, 
#search-bar button { 
  height: 50px;          
  width: 420px;          
  font-size: 18px;       
  border-radius: 10px; 
  border: 1px solid #ccc; 
  box-shadow: 0 5px 12px rgba(0,0,0,0.1);
  transition: transform 0.2s, box-shadow 0.2s;
}

#search-bar select:focus, 
#search-bar input:focus { 
  outline: none; 
  border-color: #4CAF50;
  box-shadow: 0 5px 22px rgba(0,128,0,0.3);
  transform: scale(1.02);
}

#search-bar button { 
  background: #4CAF50; 
  color: white; 
  border: none; 
  font-weight: bold;
  cursor: pointer;
}

#search-bar button:hover { 
  background: #2E7D32; 
  transform: scale(1.05);
}

/* Student Cards */
#studentGrid { 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  margin:20px; 
}

.student-card { 
  display:none; 
  flex-direction:column; 
  align-items:center;
  background:white; 
  padding:25px; 
  border-radius:12px; 
  width:400px; 
  max-width:95%; 
  box-shadow:0 6px 20px rgba(0,0,0,0.15); 
  margin-bottom:25px; 
  font-size:18px; 
}

.student-card img { 
  width:120px; 
  height:120px; 
  object-fit:cover; 
  border-radius:50%; 
  display:block; 
  margin:0 auto 20px auto; 
}

.student-info { 
  display:flex; 
  flex-direction:column; 
  gap:10px; 
  width:100%; 
}

.student-info p { 
  margin:0; 
  padding:8px; 
  background:#e0f7fa; 
  border-radius:6px; 
  word-wrap: break-word ; 
}

.print-btn, .result-btn { 
  padding:12px 24px; 
  background:#2196F3; 
  color:white; 
  border:none; 
  border-radius:8px; 
  cursor:pointer; 
  margin-top:10px; 
  font-size:16px; 
  transition: transform 0.2s; 
}
.print-btn:hover, .result-btn:hover { 
  background:#0b7dda; 
  transform: scale(1.05); 
}
</style>
</head>
<body>

<header>
  <h1>Green Valley High School</h1>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="faculty.html">Faculty</a></li>
      <li><a href="students.html" class="active">Students</a></li>
      <li><a href="admission.html">Admission</a></li>
    </ul>
  </nav>
</header>

<section id="students-page">
  <h2 style="text-align:center;">Search Student</h2>

  <!-- Search Inputs -->
  <div id="search-bar">
    <select id="classSelect">
      <option value="">Select Class</option>
      <option value="1">Class 1</option>
      <option value="2">Class 2</option>
      <option value="3">Class 3</option>
      <option value="4">Class 4</option>
      <option value="5">Class 5</option>
      <option value="6">Class 6</option>
      <option value="7">Class 7</option>
      <option value="8">Class 8</option>
      <option value="9">Class 9</option>
      <option value="10">Class 10</option>
    </select>

    <select id="sectionSelect">
      <option value="">Select Section</option>
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
    </select>

    <input type="number" id="rollInput" placeholder="Roll Number">

    <button onclick="searchStudent()">Search</button>
  </div>

  <!-- Student Grid -->
  <div id="studentGrid"></div>
</section>

<footer>
  <p style="text-align:center;">&copy; 2025 Green Valley High School</p>
</footer>

<script>
// Load students from localStorage
let students = JSON.parse(localStorage.getItem("studentsData")) || [];

// Generate student cards
function generateStudentCards(){
  const studentGrid = document.getElementById('studentGrid');
  studentGrid.innerHTML = ''; // clear previous
  students.forEach(stu => {
    const card = document.createElement('div');
    card.className = 'student-card';
    card.id = `stu-${stu.class}-${stu.section}-${stu.roll}`;
    card.innerHTML = `
      <img src="${stu.img || 'default.jpg'}" alt="${stu.name}">
      <div class="student-info">
        <p><strong>Name:</strong> ${stu.name}</p>
        <p><strong>Class:</strong> ${stu.class}</p>
        <p><strong>ID:</strong> ${stu.id}</p>
        <p><strong>Section:</strong> ${stu.section}</p>
        <p><strong>Roll:</strong> ${stu.roll}</p>
        <p><strong>Blood Group:</strong> ${stu.bloodGroup || ''}</p>
        <p><strong>Contact:</strong> ${stu.contact || ''}</p>
        <p><strong>Address:</strong> ${stu.address || ''}</p>
        <p><strong>Parent Name & Contact:</strong> ${stu.parentName || ''} (${stu.parentContact || ''})</p>
        <button class="print-btn" onclick="printStudent('${stu.class}','${stu.section}','${stu.roll}')">Print Info</button>
        <a href="student.result.html?class=${stu.class}&section=${stu.section}&roll=${stu.roll}" target="_blank">
          <button class="result-btn">View Result</button>
        </a>
      </div>
    `;
    studentGrid.appendChild(card);
  });
}

// Initial generation
generateStudentCards();

// Listen to storage changes (for auto update if Admission.html adds a student)
window.addEventListener('storage', () => {
  students = JSON.parse(localStorage.getItem("studentsData")) || [];
  generateStudentCards();
});

// Search function
function searchStudent(){
  const cls = document.getElementById('classSelect').value;
  const sec = document.getElementById('sectionSelect').value;
  const roll = document.getElementById('rollInput').value;

  document.querySelectorAll('.student-card').forEach(c => c.style.display='none');

  if(cls && sec && roll){
    const card = document.getElementById(`stu-${cls}-${sec}-${roll}`);
    if(card){
      card.style.display='flex';
      card.scrollIntoView({behavior:"smooth"});
    } else {
      alert('Student not found!');
    }
  } else {
    alert('Please select class, section and enter roll number.');
  }
}

// Print function
function printStudent(cls, sec, roll){
  const card = document.getElementById(`stu-${cls}-${sec}-${roll}`);
  if(card){
    const printWindow = window.open('', '', 'height=700,width=900');
    printWindow.document.write('<html><head><title>Print Student Info</title></head><body>');
    printWindow.document.write(card.outerHTML);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
  } else {
    alert('No student info to print!');
  }
}
</script>
</body>
</html>
